LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
devtools::check()
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-66.1
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
lbsprSimWrapper
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
lbsprSimExample@sim$F_M
lbsprSimExample@sim$stop
lbsprSimExample@sim$SPR_EU
lbsprSimExample@sim$F_M
which(lbsprSimExample@sim$F_M == 2.8)
NROW(lbsprSimExample@sim$F_M)
dim(lbsprSimExample@sim$SPR_EU)
lbsprSimExample@sim$SPR_EU[21,]
which(lbsprSimExample@sim$F_M == 2.8)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
which(lbsprSimExample@sim$F_M == 2.8)
which(lbsprSimExample@sim
lbsprSimExample@sim
lbsprSimExample@sim
lbsprSimExample@sim$F_M[15]
lbsprSimExample@sim$F_M[15]*12
typeof(lbsprSimExample@sim$F_M[15])
typeof(lbsprSimExample@sim$F_M[1])
typeof(lbsprSimExample@sim$F_M)
?seq
x<-seq(1,10,1)
typeof(x)
X<-lbsprSimExample@sim$F_M
which(X == 2.8)
X<-as.numeric(lbsprSimExample@sim$F_M)
which(X == 2.8)
X<-seq(0, 4, 0.2)
which(X == 2.8)
which(X == 2.6)
which(X == 3.0)
X
X<-round(X, 2)
which(X == 2.8)
X<-seq(0, 4, 0.2)
X<-round(X, 3)
X
which(X == 2.8)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
?Waiter
??Waiter
library(shiny)
library(waiter)
library(fishSimGTG)
library(bs4Dash)
?Waiter
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
host <- Hostess$new()
host
waitLoad <- Waiter$new()
waitLoad
waitLoad <- Waiter$new(
id = "fish",
html = host$get_loader(
preset = "bubble",
text_color = "black",
center_page = TRUE,
class = "",
min = 0,
max = 100,
svg = NULL,
progress_type = "fill",
fill_direction = c("btt", "ttb", "ltr", "rtl"),
stroke_direction = c("normal", "reverse"),
fill_color = NULL,
stroke_color = NULL
),
color = transparent(alpha = 0.8),
fadeout = TRUE
)
waitLoad
Hostess$new()
?hostess_loader
?Hostess
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runif(1)
runif(1)
runif(1)
runif(1)
runif(1)
runif(1)
runif(1)
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
Lc<-1:50
F_M<-round(seq(0, 4, F_MStep), 3)
round(seq(0, 4, F_MStep), 3)
F_MStep = 0.2
Lc<-1:50
F_M<-round(seq(0, 4, F_MStep), 3)
Lc
F_M
steps<-NROW(Lc)*NROW(F_M)
counter <- 0
stop = FALSE
steps
for (i in 1:NROW(F_M)){
for (j in 1:NROW(Lc)){
# tmpPars<-MyPars
# tmpPars@FM<-F_M[i]
# tmpPars@SL50 <- Lc[j]
# tmpPars@SL95 <-Lc[j]+1
# tmpSim <- show_condition(LBSPRsim(tmpPars, verbose=FALSE))
#
# if(is.na(tmpSim)[1]) {
#   stop = TRUE
#   break
# }
#
# SPR_EU[i,j]=tmpSim$SPR
# YPR_EU[i,j]=tmpSim$YPR
# Yield_EU[i,j]=tmpSim$Yield
counter<-counter+1
if(!is.null(hostName) & !is.null(waitName)){
hostName$set(round(counter/steps*100,0))
}
}
#if(stop) break
}
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
steps<-NROW(Lc)*NROW(F_M)
runApp('data-raw/Shiny lbsprSimWrapper with waiter.R')
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
LifeHistory@Steep
X<-new("LifeHistory")
length(X@Steep)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
lbsprSimExample
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
devtools::check()
library(tidyverse)
LH_to_dataframe(LifeHistoryExample)
LH_to_dataframe <- function(LifeHistoryObj, digits=3) {
slot(LifeHistoryObj, 'appBuild', check=FALSE) <- NULL
nms <- slotNames(LifeHistoryObj)
lst <- lapply(nms, function(nm) slot(LifeHistoryObj, nm))
ind<-which(lengths(lst)!=0)
data.frame(setNames(lst[ind], nms[ind])) %>%
mutate(across(any_of(c("Linf", "K", "t0", "L50", "L95", "M", "MK", "LW_B", "Steep", "H50", "H95", "recSD", "recRho")), round, digits))  %>%
mutate(across(any_of(c("Tmax", "R0")), round, 1))  %>%
mutate(across(any_of(c("LW_A")), signif, digits))  %>%
rename_with(
~ case_when(
. == "title" ~ "Title",
. == "speciesName" ~ "Species",
. == "shortDescription" ~ "Short description",
. == "L_type" ~ "Length type",
. == "L_units" ~ "Length units",
. == "Walpha_units" ~ "Weight units",
. == "Linf" ~ "von Bertalanffy Loo",
. == "K" ~ "von Bertalanffy K",
. == "t0" ~ "von Bertalanffy t0",
. == "L50" ~ "Length at 50% maturity",
. == "L95" ~ "Length at 95% maturity",
. == "M" ~ "Natural mortality",
. == "MK" ~ "M/K",
. == "LW_A" ~ "Length-weight alpha",
. == "LW_B" ~ "Length-weight beta",
. == "Lfec_A" ~ "Length-fecundity alpha",
. == "Lfec_B" ~ "Length-fecundity beta",
. == "Tmax" ~ "Maximum age",
. == "Steep" ~ "Beverton-Holt steepness",
. == "R0" ~ "Unfished recruitment",
. == "recSD" ~ "Recruitment log-scale standard deviation",
. == "recRho" ~ "Recruitment inter-annual correlation",
. == "isHermaph" ~ "Protogynous hermaphrodite",
. == "H50" ~ "Length at which cohort is 50% male",
. == "H95" ~ "Length at which cohort is 95% male",
. == "author" ~ "Author",
. == "authAffiliation" ~ "Author affiliation",
. == "longDescription" ~ "Long description",
TRUE ~ .
)
) %>%
gather()
}
LH_to_dataframe(LifeHistoryExample)
devtools::load_all()
library(LBSPR)
LifeHistoryExample<-new("LifeHistory")
LifeHistoryExample@Linf<-100
LifeHistoryExample@L50<-66
LifeHistoryExample@L95<-67
LifeHistoryExample@MK<-1.5
LifeHistoryExample@LW_A<-0.01
LifeHistoryExample@LW_B<-3
LifeHistoryExample@Lfec_A<-0.01
LifeHistoryExample@Lfec_B<-3
LifeHistoryExample@title<-"Example fish"
LifeHistoryExample@shortDescription<-"Simulated life history of a fish based on B-H invariants"
LifeHistoryExample@speciesName<-"Example fish"
LifeHistoryExample@L_type<-"TL"
LifeHistoryExample@L_units<-"cm"
LifeHistoryExample@Walpha_units<-"g"
LifeHistoryExample@K<-0.2
LifeHistoryExample@M<-0.3
LifeHistoryExample@t0<-0
LifeHistoryExample@Tmax<- floor(-log(0.01)/0.3)
LifeHistoryExample@Steep<-0.99
LifeHistoryExample@R0<-1000
LifeHistoryExample@recSD<-0.6
LifeHistoryExample@recRho<-0
LifeHistoryExample@isHermaph<-FALSE
lbsprSimExample<-lbsprSimWrapper(LifeHistoryExample)
usethis::use_data(LifeHistoryExample, overwrite = TRUE)
usethis::use_data(lbsprSimExample, overwrite = TRUE)
LH_to_dataframe(LifeHistoryExample)
